From 580de21fe994abeea43a1653a8a945d44de27384 Mon Sep 17 00:00:00 2001
From: Matt Selsky <matthew.selsky@twosigma.com>
Date: Sat, 26 Nov 2016 23:40:45 -0500
Subject: [PATCH 032/268] Python3: Force subprocess.Popen to return strings
 instead of bytes

Fixes GitLab issue #163
---
 wafhelpers/configure.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/wafhelpers/configure.py b/wafhelpers/configure.py
index 885bd81..cfc5881 100644
--- a/wafhelpers/configure.py
+++ b/wafhelpers/configure.py
@@ -126,7 +126,7 @@ def cmd_configure(ctx, config):
         if exists(".git") and ctx.find_program("git", var="BIN_GIT", mandatory=False):
                 ctx.start_msg("DEVEL: Getting revision")
                 cmd = ["git", "log", "-1", "--format=%H"]
-                p = subprocess.Popen(cmd, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, env=None)
+                p = subprocess.Popen(cmd, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, universal_newlines=True)
                 ctx.env.NTPSEC_REVISION, stderr = p.communicate()
                 ctx.env.NTPSEC_REVISION = str(ctx.env.NTPSEC_REVISION).replace("\n", "")
                 ctx.end_msg(ctx.env.NTPSEC_REVISION)
-- 
2.7.4

