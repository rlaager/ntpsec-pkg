From ea45821e4d1464d1f46acb90b5980171aa857082 Mon Sep 17 00:00:00 2001
From: Matt Selsky <matthew.selsky@twosigma.com>
Date: Wed, 7 Dec 2016 02:34:07 -0500
Subject: [PATCH 203/268] ntpd_row_limit is an instance variable of the
 ControlSession class

---
 pylib/packet.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/pylib/packet.py b/pylib/packet.py
index 16ece38..6cf1145 100644
--- a/pylib/packet.py
+++ b/pylib/packet.py
@@ -1270,7 +1270,7 @@ class ControlSession:
                         else:
                             # ntpd has lower cap on row limit
                             self.ntpd_row_limit -= 1
-                            limit = min(limit, ntpd_row_limit)
+                            limit = min(limit, self.ntpd_row_limit)
                             if self.debug:
                                 warn("Row limit reduced to %d following CERR_BADVALUE.\n" % limit)
                     elif e.errorcode in (SERR_INCOMPLETE, SERR_TIMEOUT):
@@ -1339,7 +1339,7 @@ class ControlSession:
                         frags = min(MAXFRAGS, frags + 1)
                     else:
                         limit = min(3 * MAXFRAGS,
-                                    ntpd_row_limit,
+                                    self.ntpd_row_limit,
                                     max(limit + 1,
                                         limit * 33 / 32))
 
-- 
2.7.4

