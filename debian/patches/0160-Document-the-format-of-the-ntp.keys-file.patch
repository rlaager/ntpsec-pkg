From 9c31631ec67cd1d86e7e8fcfe7d9e16d7b6e4647 Mon Sep 17 00:00:00 2001
From: Sanjeev Gupta <ghane0@gmail.com>
Date: Sun, 4 Dec 2016 01:18:56 +0800
Subject: [PATCH 160/268] Document the format of the ntp.keys file

---
 docs/includes/ntpkeygen-body.txt | 27 +++++++++++++++++++--------
 1 file changed, 19 insertions(+), 8 deletions(-)

diff --git a/docs/includes/ntpkeygen-body.txt b/docs/includes/ntpkeygen-body.txt
index 8cd3578..6cf4038 100644
--- a/docs/includes/ntpkeygen-body.txt
+++ b/docs/includes/ntpkeygen-body.txt
@@ -89,7 +89,7 @@ is based on the Mersenne Twister, with a period of 2^19937^-1.
 [[crypto]]
 == Cryptographic Data Files ==
 
-The +ntpkeygen+ program generates a MD5 symmetric keys file
+The +ntpkeygen+ program generates a file of symmetric keys
 _ntpkey_MD5key_hostname.filestamp_. Since the file contains private
 shared keys, it should be visible only to root and distributed by secure
 means to other subnet hosts. The NTP daemon loads the file _ntp.keys_,
@@ -99,12 +99,23 @@ automated means on the other subnet hosts. This file is needed to
 authenticate some remote configuration commands used by the {ntpqman}
 utility.
 
-Following the header the keys are entered one per line in the
-format _keyno_ _type_ _key_ where _keyno_ is a positive integer in the
-range 1-65,535, _type_ is the string MD5 defining the key format and
-_key_ is the key itself, which is a printable ASCII string 16 characters
-or less in length. Each character is chosen from the 93 printable
-characters in the range 0x21 through 0x7f excluding space and the ‘#’
-character.
+Comments may appear in the file, and are preceeded with the +#+
+character.  
+
+Following any headers the keys are entered one per line in the
+format:
+
+[options="header"]
+|====================================================================
+|Field	| Meaning
+|keyno	| Positive integer in the range 1-65,535
+|type	| MD5 or SHA1 , type of key
+|key	| the actual key, printable ASCII
+|====================================================================
+
+// Recheck.  The code does not check for ' '.  -- Sanjeev 20161203
+// For type MD5, each character is chosen from the 93 printable
+// characters in the range 0x21 through 0x7f excluding space and the ‘#’
+// character.
 
 // end
-- 
2.7.4

